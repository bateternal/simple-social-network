var htmlCanvasImgResizer = function(e) {
    var t = {};

    function n(r) {
        if (t[r]) return t[r].exports;
        var i = t[r] = {
            i: r,
            l: !1,
            exports: {}
        };
        return e[r].call(i.exports, i, i.exports, n), i.l = !0, i.exports
    }
    return n.m = e, n.c = t, n.d = function(e, t, r) {
        n.o(e, t) || Object.defineProperty(e, t, {
            enumerable: !0,
            get: r
        })
    }, n.r = function(e) {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
            value: "Module"
        }), Object.defineProperty(e, "__esModule", {
            value: !0
        })
    }, n.t = function(e, t) {
        if (1 & t && (e = n(e)), 8 & t) return e;
        if (4 & t && "object" == typeof e && e && e.__esModule) return e;
        var r = Object.create(null);
        if (n.r(r), Object.defineProperty(r, "default", {
                enumerable: !0,
                value: e
            }), 2 & t && "string" != typeof e)
            for (var i in e) n.d(r, i, function(t) {
                return e[t]
            }.bind(null, i));
        return r
    }, n.n = function(e) {
        var t = e && e.__esModule ? function() {
            return e.default
        } : function() {
            return e
        };
        return n.d(t, "a", t), t
    }, n.o = function(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
    }, n.p = "", n(n.s = 0)
}([function(e, t, n) {
    "use strict";
    n.r(t);
    var r = function() {
            return (r = Object.assign || function(e) {
                for (var t, n = 1, r = arguments.length; n < r; n++)
                    for (var i in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
                return e
            }).apply(this, arguments)
        },
        i = function(e, t, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(e) {
                    try {
                        l(r.next(e))
                    } catch (e) {
                        o(e)
                    }
                }

                function s(e) {
                    try {
                        l(r.throw(e))
                    } catch (e) {
                        o(e)
                    }
                }

                function l(e) {
                    var t;
                    e.done ? i(e.value) : (t = e.value, t instanceof n ? t : new n((function(e) {
                        e(t)
                    }))).then(a, s)
                }
                l((r = r.apply(e, t || [])).next())
            }))
        },
        o = function(e, t) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = a.trys, (i = i.length > 0 && i[i.length - 1]) || 6 !== o[0] && 2 !== o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = t.call(e, a)
                        } catch (e) {
                            o = [6, e], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        };
    t.default = function(e) {
        var t = e.dragCornerBoxSize || 20,
            n = e.cropImageWatcher,
            a = e.cropMaskColor || "rgba(0, 0, 0, 0.5)",
            s = e.cropCornerColor || "green",
            l = e.cropCornerLineWidth || 5,
            u = void 0 === e.checkForContainerResizeMS ? 1e3 : e.checkForContainerResizeMS,
            c = function(e, t) {
                var n = document.getElementById(e);
                if (!n) throw Error("Please provide a valid html element Id to work with");
                var r = document.createElement("div");
                r.setAttribute("style", "width:100%; height:100%; position:relative"), n.appendChild(r);
                var i = document.createElement("canvas");
                i.setAttribute("style", "max-width:100%; max-height:100%; position:absolute; top:0; left:0");
                var o = document.createElement("canvas");
                o.setAttribute("style", "max-width:100%; max-height:100%; position:absolute; top:0; left:0");
                var a = document.createElement("canvas");
                a.setAttribute("style", "display:none");
                var s = document.createElement("div"),
                    l = document.createElement("div"),
                    u = document.createElement("div"),
                    c = document.createElement("div"),
                    h = document.createElement("div");
                return c.setAttribute("style", "position: absolute; width: " + t + "px; height: " + t + "px; top: 0px; left: 0px; cursor: sw-resize; background: transparent; stroke: transparent;"), u.setAttribute("style", "position: absolute; width: " + t + "px; height: " + t + "px; top: 0px; left: 0px; cursor: se-resize; background: transparent; stroke: transparent;"), l.setAttribute("style", "position: absolute; width: " + t + "px; height: " + t + "px; top: 0px; left: 0px; cursor: ne-resize; background: transparent; stroke: transparent;"), s.setAttribute("style", "position: absolute; width: " + t + "px; height: " + t + "px; top: 0px; left: 0px; cursor: nw-resize; background: transparent; stroke: transparent;"), h.setAttribute("style", "position: absolute; width: " + t + "px; height: " + t + "px; top: 0px; left: 0px; cursor: all-scroll; background: transparent; stroke: transparent;"), r.appendChild(a), r.appendChild(i), r.appendChild(o), r.appendChild(h), r.appendChild(c), r.appendChild(u), r.appendChild(l), r.appendChild(s), {
                    exportCanvas: a,
                    imageCanvas: i,
                    cropCanvas: o,
                    selectionDiv: h,
                    bottomRightCornerDiv: u,
                    bottomLeftCornerDiv: c,
                    topLeftCornerDiv: s,
                    topRightCornerDiv: l,
                    imageDiv: n,
                    containerDiv: r
                }
            }(e.id, t),
            h = c.imageDiv,
            d = c.exportCanvas,
            p = c.imageCanvas,
            v = c.cropCanvas,
            f = c.selectionDiv,
            y = c.bottomRightCornerDiv,
            m = c.bottomLeftCornerDiv,
            g = c.topLeftCornerDiv,
            x = c.topRightCornerDiv,
            w = c.containerDiv,
            b = p.getContext("2d");
        if (!b) throw Error("Not able to create canvas");
        var C = v.getContext("2d");
        if (!C) throw Error("Not able to create canvas");
        var E, L = d.getContext("2d");
        if (!L) throw Error("Not able to create canvas");
        var k, T = !1,
            R = !1,
            D = !1,
            W = !1,
            I = !1,
            S = new Image;
        e.imageURL && (S.src = e.imageURL);
        var M = function(e, t) {
            return void 0 === t && (t = {
                dataType: "dataURL",
                imageType: "image/jpeg",
                imageQuality: 1
            }), i(void 0, void 0, void 0, (function() {
                var n;
                return o(this, (function(r) {
                    return n = {
                        width: d.width,
                        height: d.height,
                        mime: t.imageType
                    }, "blob" === t.dataType ? [2, d.toBlob((function(t) {
                        e(t, n)
                    }), t.imageType, t.imageQuality)] : (e(d.toDataURL(t.imageType, t.imageQuality), n), [2])
                }))
            }))
        };
        return S.onload = function() {
            var e = h.clientWidth,
                c = S.height * (e / S.width);
            c > S.height && (c = S.height), w.style.height = c + "px", p.width = S.width, p.height = S.height, v.width = p.clientWidth, v.height = p.clientHeight, v.addEventListener("mouseup", O, !1), v.addEventListener("mousemove", N, !1), b.drawImage(S, 0, 0), m.addEventListener("mousedown", (function() {
                R = !0
            }), !1), m.addEventListener("mouseup", O, !1), m.addEventListener("mousemove", N, !1), g.addEventListener("mousedown", (function() {
                T = !0
            }), !1), g.addEventListener("mouseup", O, !1), g.addEventListener("mousemove", N, !1), x.addEventListener("mousedown", (function() {
                D = !0
            }), !1), x.addEventListener("mouseup", O, !1), x.addEventListener("mousemove", N, !1), y.addEventListener("mousedown", (function() {
                W = !0
            }), !1), y.addEventListener("mouseup", O, !1), y.addEventListener("mousemove", N, !1), f.addEventListener("mousedown", (function() {
                I = !0
            }), !1), f.addEventListener("mouseup", O, !1), f.addEventListener("mousemove", N, !1);
            var j = {
                    x: 0,
                    y: 0,
                    w: p.clientWidth,
                    h: p.clientHeight
                },
                A = r({
                    canvasWidth: p.clientWidth,
                    canvasHeight: p.clientHeight
                }, j);

            function O() {
                T = D = R = W = I = !1
            }
            k && clearInterval(k), u > 0 && (k = window.setInterval((function() {
                var e = p.offsetWidth,
                    t = p.offsetHeight;
                if (A.canvasHeight != t || A.canvasWidth != e) {
                    var n = A.canvasWidth > 0 ? e / A.canvasWidth : 0,
                        i = A.canvasHeight > 0 ? t / A.canvasHeight : 0;
                    A = r(r({}, j), {
                        canvasHeight: t,
                        canvasWidth: e
                    }), v.width = e, v.height = t, j.w = (j.w > 0 ? j.w : 1) * n, j.h = (j.h > 0 ? j.h : 1) * i, U()
                }
            }), u)), E = function() {
                return i(void 0, void 0, void 0, (function() {
                    var e, t, r, i, a, s;
                    return o(this, (function(o) {
                        return e = S.width / v.width, t = S.height / v.height, r = j.x * e, i = j.y * t, a = j.w * e, s = j.h * t, d.width = a, d.height = s, L.drawImage(S, r, i, a, s, 0, 0, a, s), n && n.cb && M(n.cb, n.imgArg), [2]
                    }))
                }))
            };
            var z = 0,
                H = 0,
                P = 0,
                _ = 0;

            function N(e) {
                if (!h) throw Error("Not able to create canvas");
                var n = v.getBoundingClientRect(),
                    r = e.clientX - n.x,
                    i = e.clientY - n.y,
                    o = !1;
                T ? (j.w += j.x - r, j.h += j.y - i, j.x = r, j.y = i, o = !0) : D ? (j.w = Math.abs(j.x - r), j.h += j.y - i, j.y = i, o = !0) : R ? (j.w += j.x - r, j.h = Math.abs(j.y - i), j.x = r, o = !0) : W ? (j.w = Math.abs(j.x - r), j.h = Math.abs(j.y - i), o = !0) : I && (j.x += r - z, j.y += i - H, o = !0), o && (j.w < 2 * t && (j.w = 2 * t, j.x = P), j.h < 2 * t && (j.h = 2 * t, j.y = _), j.x < 0 && (j.x = 0), j.x + j.w > v.width && (j.x = v.width - j.w), j.y < 0 && (j.y = 0), j.y + j.h > v.height && (j.y = v.height - j.h), U()), z = r, H = i, P = j.x, _ = j.y
            	
            }

            function U() {
                if (!C) throw Error("Not able to create canvas");
                if (p.clientWidth < p.clientHeight){
                    j.h = j.w
                }else{
                    j.w = j.h
                }
                C.clearRect(0, 0, v.width, v.height), C.fillStyle = a, C.strokeStyle = s, C.lineWidth = l, C.fillRect(0, 0, v.width, v.height), C.clearRect(j.x, j.y, j.w, j.h), C.beginPath(), C.moveTo(j.x, j.y + t), C.lineTo(j.x, j.y), C.lineTo(j.x + t, j.y), C.moveTo(j.x + j.w - t, j.y), C.lineTo(j.x + j.w, j.y), C.lineTo(j.x + j.w, j.y + t), C.moveTo(j.x + j.w, j.y + j.h - t), C.lineTo(j.x + j.w, j.y + j.h), C.lineTo(j.x + j.w - t, j.y + j.h), C.moveTo(j.x + t, j.y + j.h), C.lineTo(j.x, j.y + j.h), C.lineTo(j.x, j.y + j.h - t), C.stroke(), g.style.top = x.style.top = j.y + "px", g.style.left = m.style.left = j.x + "px", x.style.left = y.style.left = j.x + j.w - t + "px", m.style.top = y.style.top = j.y + j.h - t + "px", f.style.top = j.y + "px", f.style.left = j.x + "px", f.style.width = j.w + "px", f.style.height = j.h + "px", E()
            }
            U()
        }, {
            getImage: function(e, t) {
                return i(void 0, void 0, void 0, (function() {
                    return o(this, (function(n) {
                        return M(e, t), [2]
                    }))
                }))
            },
            setImageURL: function(e) {
                S.src = e
            },
            stopResizeCheck: function() {
                clearInterval(k)
            }
        }
    }
}]);
//# sourceMappingURL=html-canvas-img-resizer.min.js.map